{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"ArgoCD","text":"<p>ArgoCD is a tool created by Intuit, that is focused on deploying and managing workloads on Kubernetes. Intuit believe configuration/definition/deployment data for apps and environments should be declarative</p>"},{"location":"#argocd-components","title":"ArgoCD Components","text":"<ul> <li>Kubernetes Cluster</li> <li>ArgoCD Service/Application</li> <li>Git Repository</li> <li>Webhooks</li> </ul>"},{"location":"#argocd-applicaiton-lifestyle","title":"ArgoCD Applicaiton Lifestyle","text":"<ul> <li>The output of CI should be deployable k8s config stored in a git repo</li> <li>k8s config defines an ArgoCD Application custom resource definition</li> <li>When this config is added to the git repo, ArgoCD receives a webhook request</li> <li>ArgoCD synchronizes with the git repo<ul> <li>A git pull</li> <li>Compares what should be running with what is running</li> <li>(Re-)Deploys updated applications</li> </ul> </li> <li>ArgoCD supports pre and post sync hooks<ul> <li>Helm chart hooks don't work</li> <li>ArgoCD is essentially doing <code>helm template | kubectl -f -</code></li> </ul> </li> <li>Any changes in the k8s config will cause an application to re-deploy<ul> <li>Things you want to cause a re-deploy: docker image tag, helm chart version number</li> <li>Things you may not want: dates, timestamps, any random string</li> </ul> </li> <li>Undeploy by removing the application from the git repo or it can be configured</li> <li>The git repo is the source of truth for how things should be deployed</li> <li>The ArgoCD UI (or metrics) is the source of trught for any deployment state</li> <li>The ArgoCD Application CR can point to another Application CI and so on</li> <li>ArgoCD can be configured to access other Kubernetes clusters<ul> <li>Application belong to a project, a project can target an external k8s cluster</li> </ul> </li> <li>Supports custom deployment methods<ul> <li>Blue/Green, Canary</li> <li>ArgoRollouts</li> </ul> </li> </ul>"},{"location":"argocd/","title":"Install Argo CD","text":"<p>ArgoCD needs to be installed on your Kubernetes cluster to manage the GitOps workflow. Follow these steps to install it:</p>"},{"location":"argocd/#steps-11-install-argocd-on-ubuntu","title":"Steps 1.1: Install ArgoCD on Ubuntu","text":"<p>Run the following commands to install ArgoCD CLI:</p> <pre><code># Retrieve the version of the current release\nARGOCD_VERSION=$(curl --silent \"https://api.github.com/repos/argoproj/argo-cd/releases/latest\" | grep '\"tag_name\"' | sed -E 's/.*\"([^\"]+)\".*/\\1/')\n\n# Retrieve the binary from GitHub to a temporary location\ncurl -sSL -o /tmp/argocd-${ARGOCD_VERSION} https://github.com/argoproj/argo-cd/releases/download/${ARGOCD_VERSION}/argocd-linux-amd64\n\n# Make the binary executable and move it to a location within $PATH /usr/local/bin\nchmod +x /tmp/argocd-${VERSION}\nsudo mv /tmp/argocd-${VERSION} /usr/local/bin/argocd \n\n# Verify installation\nargocd version --client\n</code></pre> <p>Run the following command to install ArgoCD:</p> <pre><code># ArgoCD Installation\nkubectl create namespace argocd\nkubectl apply -n argocd -f https://raw.githubusercontent.com/argoproj/argo-cd/stable/manifests/install.yaml\n</code></pre>"},{"location":"argocd/#steps-12-access-argocd-cli","title":"Steps 1.2: Access ArgoCD CLI","text":"<p>Expose the ArgoCD server</p> <pre><code>kubectl port-forward svc/argocd-server -n argocd 8080:443\n</code></pre> <p>Get the username and password</p> <pre><code>kubectl -n argocd get secret argocd-initial-admin-secret -o jsonpath='{.data.password}' | base64 -d\n</code></pre> <p>Open the browser and go to <code>http://localhost:8080</code>. Use <code>admin</code> as the username and use the password that you got from the last command</p>"}]}